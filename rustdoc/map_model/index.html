<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="`map_model` describes the world where simulations occur. Importing a map from OSM partly happens in `convert_osm` and here."><title>map_model - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-1a91846b.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="map_model" data-themes="" data-resource-suffix="" data-rustdoc-version="1.88.0 (6b00bc388 2025-06-23)" data-channel="1.88.0" data-search-js="search-f7877310.js" data-settings-js="settings-5514c975.js" ><script src="../static.files/storage-4e99c027.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-7ef8a74a.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../map_model/index.html">map_<wbr>model</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#modules">Crate Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#constants" title="Constants">Constants</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>map_model</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/map_model/lib.rs.html#1-137">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p><code>map_model</code> describes the world where simulations occur. Importing a map from OSM partly happens
in <code>convert_osm</code> and here.</p>
<p>Helpful terminology:</p>
<ul>
<li>ch = contraction hierarchy, for speeding up pathfinding</li>
<li>degenerate intersection = only has 2 roads connected, so why is it an intersection at all?</li>
<li>lc = lane-change (which is modelled very strangely: <a href="https://a-b-street.github.io/docs/tech/trafficsim/discrete_event/index.html#lane-changing">https://a-b-street.github.io/docs/tech/trafficsim/discrete_event/index.html#lane-changing</a>)</li>
<li>ltr = left-to-right, the order of lanes for a road</li>
<li>osm = OpenStreetMap</li>
</ul>
<p>Map objects are usually abbreviated in method names:</p>
<ul>
<li>a = area</li>
<li>b = building</li>
<li>tr = transit route</li>
<li>ts = transit stop</li>
<li>i = intersection</li>
<li>l = lane</li>
<li>pl = parking lot</li>
<li>r = road</li>
<li>ss = stop sign</li>
<li>t = turn</li>
<li>ts = traffic signal</li>
</ul>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="city/index.html" title="mod map_model::city">city</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="mod" href="connectivity/index.html" title="mod map_model::connectivity">connectivity</a></dt><dt><a class="mod" href="edits/index.html" title="mod map_model::edits">edits</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dd>Once a Map exists, the player can edit it in the UI (producing <code>MapEdits</code> in-memory), then save
the changes to a file (as <code>PermanentMapEdits</code>). See
<a href="https://a-b-street.github.io/docs/tech/map/edits.html">https://a-b-street.github.io/docs/tech/map/edits.html</a>.</dd><dt><a class="mod" href="make/index.html" title="mod map_model::make">make</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dd>See <a href="https://a-b-street.github.io/docs/tech/map/importing/index.html">https://a-b-street.github.io/docs/tech/map/importing/index.html</a> for an overview. This module
covers the RawMap-&gt;Map stage.</dd><dt><a class="mod" href="map/index.html" title="mod map_model::map">map</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dd>A bunch of (mostly read-only) queries on a Map.</dd><dt><a class="mod" href="objects/index.html" title="mod map_model::objects">objects</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="mod" href="osm/index.html" title="mod map_model::osm">osm</a></dt><dd>Useful utilities for working with OpenStreetMap.</dd><dt><a class="mod" href="pathfind/index.html" title="mod map_model::pathfind">pathfind</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dd>Everything related to pathfinding through a map for different types of agents.</dd><dt><a class="mod" href="traversable/index.html" title="mod map_model::traversable">traversable</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.AccessRestrictions.html" title="struct map_model::AccessRestrictions">Access<wbr>Restrictions</a></dt><dt><a class="struct" href="struct.Amenity.html" title="struct map_model::Amenity">Amenity</a></dt><dd>A business located inside a building.</dd><dt><a class="struct" href="struct.Area.html" title="struct map_model::Area">Area</a></dt><dd>Areas are just used for drawing.</dd><dt><a class="struct" href="struct.AreaID.html" title="struct map_model::AreaID">AreaID</a></dt><dt><a class="struct" href="struct.Building.html" title="struct map_model::Building">Building</a></dt><dd>A building has connections to the road and sidewalk, may contain commercial amenities, and have
off-street parking.</dd><dt><a class="struct" href="struct.BuildingID.html" title="struct map_model::BuildingID">BuildingID</a></dt><dt><a class="struct" href="struct.City.html" title="struct map_model::City">City</a></dt><dd>A single city (like Seattle) can be broken down into multiple boundary polygons (udistrict,
ballard, downtown, etc). The load map screen uses this struct to display the entire city.</dd><dt><a class="struct" href="struct.CompressedMovementID.html" title="struct map_model::CompressedMovementID">Compressed<wbr>MovementID</a></dt><dd>This is cheaper to store than a MovementID. It simply indexes into the list of movements.</dd><dt><a class="struct" href="struct.ControlStopSign.html" title="struct map_model::ControlStopSign">Control<wbr>Stop<wbr>Sign</a></dt><dt><a class="struct" href="struct.ControlTrafficSignal.html" title="struct map_model::ControlTrafficSignal">Control<wbr>Traffic<wbr>Signal</a></dt><dd>A traffic signal consists of a sequence of Stages that repeat in a cycle. Most Stages last for a
fixed duration. During a single Stage, some movements are protected (can proceed with the
highest priority), while others are permitted (have to yield before proceeding).</dd><dt><a class="struct" href="struct.Crossing.html" title="struct map_model::Crossing">Crossing</a></dt><dt><a class="struct" href="struct.DiagonalFilter.html" title="struct map_model::DiagonalFilter">Diagonal<wbr>Filter</a></dt><dd>A diagonal filter exists in an intersection. It’s defined by two roads (the order is
arbitrary). When all of the intersection’s roads are sorted in clockwise order, this pair of
roads splits the ordering into two groups. Turns in each group are still possible, but not
across groups.</dd><dt><a class="struct" href="struct.DirectedRoadID.html" title="struct map_model::DirectedRoadID">Directed<wbr>RoadID</a></dt><dt><a class="struct" href="struct.EditEffects.html" title="struct map_model::EditEffects">Edit<wbr>Effects</a></dt><dt><a class="struct" href="struct.EditIntersection.html" title="struct map_model::EditIntersection">Edit<wbr>Intersection</a></dt><dt><a class="struct" href="struct.EditRoad.html" title="struct map_model::EditRoad">Edit<wbr>Road</a></dt><dt><a class="struct" href="struct.ExtraPOI.html" title="struct map_model::ExtraPOI">ExtraPOI</a></dt><dd>Extra point-of-interest</dd><dt><a class="struct" href="struct.Intersection.html" title="struct map_model::Intersection">Intersection</a></dt><dd>An intersection connects roads. Most have &gt;2 roads and are controlled by stop signs or traffic
signals. Roads that lead to the boundary of the map end at border intersections, with only that
one road attached.</dd><dt><a class="struct" href="struct.IntersectionCluster.html" title="struct map_model::IntersectionCluster">Intersection<wbr>Cluster</a></dt><dd>This only applies to VehiclePathfinder; walking through these intersections is nothing special.
And in fact, even lanes only for buses/bikes are ignored.</dd><dt><a class="struct" href="struct.IntersectionID.html" title="struct map_model::IntersectionID">IntersectionID</a></dt><dt><a class="struct" href="struct.Lane.html" title="struct map_model::Lane">Lane</a></dt><dd>A road segment is broken down into individual lanes, which have a LaneType.</dd><dt><a class="struct" href="struct.LaneID.html" title="struct map_model::LaneID">LaneID</a></dt><dd>A lane is identified by its parent road and its position, ordered from the left.</dd><dt><a class="struct" href="struct.LaneSpec.html" title="struct map_model::LaneSpec">Lane<wbr>Spec</a></dt><dt><a class="struct" href="struct.Map.html" title="struct map_model::Map">Map</a></dt><dt><a class="struct" href="struct.MapConfig.html" title="struct map_model::MapConfig">MapConfig</a></dt><dt><a class="struct" href="struct.MapEdits.html" title="struct map_model::MapEdits">MapEdits</a></dt><dd>Represents changes to a map. Note this isn’t serializable – that’s what <code>PermanentMapEdits</code>
does.</dd><dt><a class="struct" href="struct.Movement.html" title="struct map_model::Movement">Movement</a></dt><dd>A Movement groups all turns from one road to another, letting traffic signals and pathfinding
operate at a higher level of abstraction.</dd><dt><a class="struct" href="struct.MovementID.html" title="struct map_model::MovementID">MovementID</a></dt><dd>A movement is like a turn, but with less detail – it identifies a movement from one directed
road to another.
One road usually has 4 crosswalks, each a singleton Movement. We need all of the information
here to keep each crosswalk separate.</dd><dt><a class="struct" href="struct.NamePerLanguage.html" title="struct map_model::NamePerLanguage">Name<wbr>PerLanguage</a></dt><dd>None corresponds to the native name</dd><dt><a class="struct" href="struct.OriginalRoad.html" title="struct map_model::OriginalRoad">Original<wbr>Road</a></dt><dd>Refers to a road segment between two nodes, using OSM IDs. Note OSM IDs are not stable over
time and the relationship between a road/intersection and way/node isn’t 1:1 at all.</dd><dt><a class="struct" href="struct.ParkingLot.html" title="struct map_model::ParkingLot">Parking<wbr>Lot</a></dt><dd>Parking lots have some fixed capacity for cars, and are connected to a sidewalk and road.</dd><dt><a class="struct" href="struct.ParkingLotID.html" title="struct map_model::ParkingLotID">Parking<wbr>LotID</a></dt><dt><a class="struct" href="struct.Path.html" title="struct map_model::Path">Path</a></dt><dt><a class="struct" href="struct.PathRequest.html" title="struct map_model::PathRequest">Path<wbr>Request</a></dt><dt><a class="struct" href="struct.PathV2.html" title="struct map_model::PathV2">PathV2</a></dt><dd>A path between two endpoints for a particular mode. This representation is immutable and doesn’t
prescribe specific lanes and turns to follow.</dd><dt><a class="struct" href="struct.Pathfinder.html" title="struct map_model::Pathfinder">Pathfinder</a></dt><dt><a class="struct" href="struct.PathfinderCache.html" title="struct map_model::PathfinderCache">Pathfinder<wbr>Cache</a></dt><dd>For callers needing to request paths with a variety of RoutingParams. The caller is in charge
of the lifetime, so they can clear it out when appropriate.</dd><dt><a class="struct" href="struct.PermanentMapEdits.html" title="struct map_model::PermanentMapEdits">Permanent<wbr>MapEdits</a></dt><dd>MapEdits are converted to this before serializing. Referencing things like LaneID in a Map won’t
work if the basemap is rebuilt from new OSM data, so instead we use stabler OSM IDs that’re less
likely to change.</dd><dt><a class="struct" href="struct.Position.html" title="struct map_model::Position">Position</a></dt><dd>Represents a specific point some distance along a lane.</dd><dt><a class="struct" href="struct.RawToMapOptions.html" title="struct map_model::RawToMapOptions">RawTo<wbr>MapOptions</a></dt><dd>Options for converting RawMaps to Maps.</dd><dt><a class="struct" href="struct.Road.html" title="struct map_model::Road">Road</a></dt><dd>A Road represents a segment between exactly two Intersections. It contains Lanes as children.</dd><dt><a class="struct" href="struct.RoadFilter.html" title="struct map_model::RoadFilter">Road<wbr>Filter</a></dt><dd>A filter placed somewhere along a road</dd><dt><a class="struct" href="struct.RoadID.html" title="struct map_model::RoadID">RoadID</a></dt><dt><a class="struct" href="struct.RoadSideID.html" title="struct map_model::RoadSideID">Road<wbr>SideID</a></dt><dt><a class="struct" href="struct.RoadWithStopSign.html" title="struct map_model::RoadWithStopSign">Road<wbr>With<wbr>Stop<wbr>Sign</a></dt><dt><a class="struct" href="struct.RoutingParams.html" title="struct map_model::RoutingParams">Routing<wbr>Params</a></dt><dd>Tuneable parameters for all types of routing.</dd><dt><a class="struct" href="struct.Stage.html" title="struct map_model::Stage">Stage</a></dt><dt><a class="struct" href="struct.TransitRoute.html" title="struct map_model::TransitRoute">Transit<wbr>Route</a></dt><dt><a class="struct" href="struct.TransitRouteID.html" title="struct map_model::TransitRouteID">Transit<wbr>RouteID</a></dt><dt><a class="struct" href="struct.TransitStop.html" title="struct map_model::TransitStop">Transit<wbr>Stop</a></dt><dt><a class="struct" href="struct.TransitStopID.html" title="struct map_model::TransitStopID">Transit<wbr>StopID</a></dt><dt><a class="struct" href="struct.Turn.html" title="struct map_model::Turn">Turn</a></dt><dd>A Turn leads from the end of one Lane to the start of another. (Except for pedestrians;
sidewalks are bidirectional.)</dd><dt><a class="struct" href="struct.TurnID.html" title="struct map_model::TurnID">TurnID</a></dt><dd>Turns are uniquely identified by their (src, dst) lanes and their parent intersection.
Intersection is needed to distinguish crosswalks that exist at two ends of a sidewalk.</dd><dt><a class="struct" href="struct.UberTurn.html" title="struct map_model::UberTurn">Uber<wbr>Turn</a></dt><dt><a class="struct" href="struct.Zone.html" title="struct map_model::Zone">Zone</a></dt><dd>A contiguous set of roads with access restrictions. This is derived from all the map’s roads and
kept cached for performance.</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.AmenityType.html" title="enum map_model::AmenityType">Amenity<wbr>Type</a></dt><dd>Businesses are categorized into one of these types.</dd><dt><a class="enum" href="enum.AreaType.html" title="enum map_model::AreaType">Area<wbr>Type</a></dt><dt><a class="enum" href="enum.BufferType.html" title="enum map_model::BufferType">Buffer<wbr>Type</a></dt><dt><a class="enum" href="enum.BuildingType.html" title="enum map_model::BuildingType">Building<wbr>Type</a></dt><dt><a class="enum" href="enum.CommonEndpoint.html" title="enum map_model::CommonEndpoint">Common<wbr>Endpoint</a></dt><dt><a class="enum" href="enum.CrossingType.html" title="enum map_model::CrossingType">Crossing<wbr>Type</a></dt><dd>Classifies pedestrian and cyclist crossings. Note lots of detail is missing.</dd><dt><a class="enum" href="enum.Direction.html" title="enum map_model::Direction">Direction</a></dt><dt><a class="enum" href="enum.DrivingSide.html" title="enum map_model::DrivingSide">Driving<wbr>Side</a></dt><dt><a class="enum" href="enum.EditCmd.html" title="enum map_model::EditCmd">EditCmd</a></dt><dt><a class="enum" href="enum.EditIntersectionControl.html" title="enum map_model::EditIntersectionControl">Edit<wbr>Intersection<wbr>Control</a></dt><dt><a class="enum" href="enum.ExtraPOIType.html" title="enum map_model::ExtraPOIType">ExtraPOI<wbr>Type</a></dt><dt><a class="enum" href="enum.FilterType.html" title="enum map_model::FilterType">Filter<wbr>Type</a></dt><dd>The type of a modal filter. Most of these don’t have semantics yet; the variation is just for
visual representation</dd><dt><a class="enum" href="enum.IntersectionControl.html" title="enum map_model::IntersectionControl">Intersection<wbr>Control</a></dt><dd>The kind of traffic control present at an intersection.</dd><dt><a class="enum" href="enum.IntersectionKind.html" title="enum map_model::IntersectionKind">Intersection<wbr>Kind</a></dt><dd>What kind of feature an <code>Intersection</code> actually represents. Any connection between roads in the
network graph is represented by an <code>Intersection</code>, but many of them are not traffic
“intersections” in the common sense.</dd><dt><a class="enum" href="enum.LaneType.html" title="enum map_model::LaneType">Lane<wbr>Type</a></dt><dt><a class="enum" href="enum.OffstreetParking.html" title="enum map_model::OffstreetParking">Offstreet<wbr>Parking</a></dt><dd>Represent no parking as Private(0, false).</dd><dt><a class="enum" href="enum.PathConstraints.html" title="enum map_model::PathConstraints">Path<wbr>Constraints</a></dt><dd>Who’s asking for a path?</dd><dt><a class="enum" href="enum.PathStep.html" title="enum map_model::PathStep">Path<wbr>Step</a></dt><dt><a class="enum" href="enum.PathStepV2.html" title="enum map_model::PathStepV2">Path<wbr>Step<wbr>V2</a></dt><dd>One step along a path.</dd><dt><a class="enum" href="enum.PathfinderCaching.html" title="enum map_model::PathfinderCaching">Pathfinder<wbr>Caching</a></dt><dd>When pathfinding with different <code>RoutingParams</code> is done, a temporary pathfinder must be
created. This specifies what type of pathfinder and whether to cache it.</dd><dt><a class="enum" href="enum.RestrictionType.html" title="enum map_model::RestrictionType">Restriction<wbr>Type</a></dt><dt><a class="enum" href="enum.SideOfRoad.html" title="enum map_model::SideOfRoad">Side<wbr>OfRoad</a></dt><dd>See https://wiki.openstreetmap.org/wiki/Forward_%26_backward,<em>left</em>%26_right.</dd><dt><a class="enum" href="enum.StageType.html" title="enum map_model::StageType">Stage<wbr>Type</a></dt><dt><a class="enum" href="enum.Traversable.html" title="enum map_model::Traversable">Traversable</a></dt><dd>Either a lane or a turn, where most movement happens.</dd><dt><a class="enum" href="enum.TurnPriority.html" title="enum map_model::TurnPriority">Turn<wbr>Priority</a></dt><dt><a class="enum" href="enum.TurnType.html" title="enum map_model::TurnType">Turn<wbr>Type</a></dt></dl><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><dl class="item-table"><dt><a class="constant" href="constant.MAX_BIKE_SPEED.html" title="constant map_model::MAX_BIKE_SPEED">MAX_<wbr>BIKE_<wbr>SPEED</a></dt><dt><a class="constant" href="constant.MAX_WALKING_SPEED.html" title="constant map_model::MAX_WALKING_SPEED">MAX_<wbr>WALKING_<wbr>SPEED</a></dt><dt><a class="constant" href="constant.NORMAL_LANE_THICKNESS.html" title="constant map_model::NORMAL_LANE_THICKNESS">NORMAL_<wbr>LANE_<wbr>THICKNESS</a></dt><dt><a class="constant" href="constant.PARKING_LOT_SPOT_LENGTH.html" title="constant map_model::PARKING_LOT_SPOT_LENGTH">PARKING_<wbr>LOT_<wbr>SPOT_<wbr>LENGTH</a></dt><dd>From some manually audited cases in Seattle, the length of parallel street parking spots is a
bit different than the length in parking lots, so set a different value here.</dd><dt><a class="constant" href="constant.SIDEWALK_THICKNESS.html" title="constant map_model::SIDEWALK_THICKNESS">SIDEWALK_<wbr>THICKNESS</a></dt></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.turn_type_from_angles.html" title="fn map_model::turn_type_from_angles">turn_<wbr>type_<wbr>from_<wbr>angles</a></dt></dl></section></div></main></body></html>