<html>
<head>
    <link rel="stylesheet" href="abstreet.css">
</head>
<body>
<script type="module">
  import { LTN } from "./ltn/ltn.bundle.js";
  let app = new LTN("app");

  document.addEventListener("DOMContentLoaded", function(event) {
    app.loadAndStart();
  });

  window.importMapDynamically = async function (input) {
  	console.log(`got input ${JSON.stringify(input)}`);
	// See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/import#importing_defaults
	const {
		default: weirdInit,
		one_step_import,
	} = await import("/js-importer/js_importer.js");
	console.log("imported stuff, await init?");
	window.weirdInit = weirdInit;
	await weirdInit();
	console.log("now call fxn");
	window.one_step_import = one_step_import;
        return one_step_import(input);
  };
</script>

<div class="widgetry-app full-screen-widgetry-app" id="app">
    <div class="preloading">
        <h1>Low Traffic Neighborhoods</h1>
    </div>
</div>

</body>
</html>
